<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>하이쏘 쇼룸찾기</title>
    <style>
      @font-face {
        font-family: "NEXON Lv1 Gothic OTF";
        src: url("https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_20-04@2.1/NEXON Lv1 Gothic OTF.woff") format("woff");
        font-weight: normal;
        font-style: normal;
      }
      @import url("https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap");

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "NEXON Lv1 Gothic OTF", sans-serif;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        max-width: 500px;
        margin: 0 auto;
      }

      /* 상단 고정 내브 바 */
      nav {
        position: fixed;
        top: 0;
        width: 100%;
        max-width: 500px;
        height: 48px;
        background-color: white;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        z-index: 100;
        display: flex;
        justify-content: center; /* 가로 중앙 정렬 */
        align-items: center; /* 세로 중앙 정렬 */
      }

      .logo {
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
      }

      .logo img {
        display: block;
        width: 104px; /* 로고 이미지의 너비 */
        height: 42px; /* 로고 이미지의 높이 */
      }

      .menu-icon {
        position: absolute;
        left: 0;
        padding: 10px 40px 10px 10px;
        font-size: 24px;
        cursor: pointer;
      }

      /* 불투명 레이어 */
      .overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 999;
        display: none;
        transition: opacity 0.3s ease;
      }

      .overlay.show {
        display: block;
        opacity: 1;
      }

      /* 사이드 메뉴 */
      .side-menu {
        position: fixed;
        top: 0;
        left: -250px; /* 기본으로는 화면 밖에 숨겨둠 */
        width: 250px;
        height: 100%;
        background-color: white;
        box-shadow: 2px 0 5px rgba(0, 0, 0, 0.2);
        transition: 0.3s ease;
        padding-top: 60px; /* 내브 바와 겹치지 않도록 패딩 */
        z-index: 1001;
      }

      .side-menu.open {
        left: 0; /* 메뉴를 열면 화면에 나타남 */
      }

      .side-menu a {
        display: block;
        padding: 15px 20px;
        text-decoration: none;
        color: #333;
        font-size: 18px;
        transition: background 0.3s ease;
      }

      .side-menu a:hover {
        background-color: #f0f0f0;
      }

      .close-btn {
        position: absolute;
        top: 15px;
        right: 20px;
        font-size: 24px;
        cursor: pointer;
      }

      .container_mo {
        padding: 24px 20px 200px 20px;
        max-width: 1200px;
        margin: auto;
        margin-top: 48px;
        z-index: 1;
      }

      /* [검색 스타일 */
      .search-bar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: #ffffff;
        padding: 10px 16px;
        margin-bottom: 20px;
        position: relative;
        width: 100%;
        border-radius: 16px;
        border: 1px solid var(--Gray-pink1, #8c898a);
        box-sizing: border-box;
      }

      .search-bar input {
        flex: 1;
        border: none;
        background: transparent;
        outline: none;
        padding-left: 10px;
        padding-right: 10px;
        font-size: 16px;
        width: 100%;
      }

      .search-bar input::placeholder {
        color: #d4d4d4;
        font-size: 15px;
        font-style: normal;
        font-weight: 700;
        line-height: 160%;
        /* 22.4px */
      }

      .search-bar button {
        background: none;
        border: none;
        cursor: pointer;
        font-size: 18px;
        display: flex;
        /* 추가 */
        align-items: center;
        /* 추가 */
        justify-content: center;
        /* 추가 */
        width: 12px;
        height: 12px;
      }

      .search-bar:focus-within {
        border: 1px solid #ff4081;
        border-bottom: none;
        border-bottom-left-radius: 0;
        border-bottom-right-radius: 0;
        box-sizing: border-box;
      }

      .search_icon_btn {
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .search-bar:focus-within .search_icon_btn {
        display: flex;
        justify-content: center;
        align-items: center;
        width: 40px;
        border-radius: 20px;
        padding: 2px 0;
        background-color: #ff4081;
      }

      .search-bar:focus-within .search-icon .ellipse {
        stroke: #ffffff;
      }

      .search-bar:focus-within {
        background-color: white;
      }

      .search-bar:focus-within input::placeholder {
        color: var(--Gray-pink1, #8c898a);
        font-size: 14px;
        font-style: normal;
        font-weight: 700;
        line-height: 160%;
      }

      #clear_btn_mo {
        padding-right: 6px;
        margin-right: 5px;
        border-right: 1px solid rgb(215, 213, 213);
      }

      #clear_btn_mo svg {
        width: 12px;
        height: 12px;
      }

      .search-bar input:not(:focus):placeholder-shown + #clear_btn_mo svg {
        width: 12px;
        height: 12px;
      }

      .search-bar input:focus + #clear_btn_mo svg,
      .search-bar input:not(:placeholder-shown) + #clear_btn_mo svg {
        width: 12px;
        height: 12px;
      }

      .recommended {
        display: none;
        position: absolute;
        gap: 10px;
        flex-direction: column;
        top: 100%;
        left: -1px;
        right: 0;
        width: calc(100% + 2px);
        background: white;
        border-left: 1px solid #ff4081;
        border-right: 1px solid #ff4081;
        border-bottom: 1px solid #ff4081;
        border-top: none;
        border-radius: 0 0 15px 15px;
        padding: 20px 31px;
        font-size: 12px;
        box-sizing: border-box;
        box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.1);
      }

      .recommended::after {
        content: "";
        position: absolute;
        top: 0;
        left: 10%;
        /* 시작 위치 */
        width: 80%;
        /* 선의 길이 */
        border-top: 1px solid #e5e5e5;
        /* 선의 색상과 두께 */
      }

      #recommended {
        z-index: 10;
      }

      .recommended .keywords {
        margin-left: 8px;
        margin-bottom: 10px;
        font-size: 12px;
        font-weight: 900;
      }

      .recommended .chips {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
      }

      .recommended .chips div {
        cursor: pointer;
        display: flex;
        padding: 8px 12px;
        justify-content: center;
        align-items: center;
        gap: 10px;
        border-radius: 18px;
        background: var(--Background-gray2, #f7f7f7);
        color: #8c898a;
        font-size: 12px;
        font-style: normal;
        font-weight: 700;
        line-height: 160%;
        /* 19.2px */
      }

      .autocomplete-results.active {
        padding: 10px;
        border-top: none;
        max-height: 300px;
        overflow-y: auto;
        position: absolute;
        background-color: #fff;
        width: 99%;
        z-index: 1000;
        top: 100%;
        left: -1px;
        right: 0;
        width: calc(100% + 2px);
        background: white;
        border-left: 1px solid #ff4081;
        border-right: 1px solid #ff4081;
        border-bottom: 1px solid #ff4081;
        border-top: none;
        border-radius: 0 0 15px 15px;
        box-sizing: border-box;
      }

      .autocomplete-item {
        padding: 10px;
        cursor: pointer;
      }

      .autocomplete-item:hover {
        background-color: #f1f1f1;
      }

      .highlight {
        background-color: yellow;
      }

      /*가까운 쇼룸 찾기*/

      .find-nearby-stores {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 10px;
        padding: 10px 20px 10px 10px;
        background-color: #f2f2f2;
        border: none;
        border-radius: 35px;
        color: #747474;
        text-align: right;
        font-size: 14px;
        font-style: normal;
        font-weight: 700;
        line-height: 160%;
        /* 22.4px */
        cursor: pointer;
      }

      /* default: SVG 아이콘 스타일 */
      .find-nearby-stores svg .finder_icon,
      .find-nearby-stores svg circle {
        stroke: #747474;
        /* 기본 원 색상 */
      }

      /* onClick: 아이콘 색상 변경 */
      .find-nearby-stores.active,
      .find-nearby-stores.active .finder_icon,
      .find-nearby-stores.active circle {
        background-color: #ff4081;
        color: #fff;
        /* 텍스트 색상 변경 */
        stroke: #fff;
        /* 원 색상 변경 */
      }

      /* [시도 권역 선택] */

      .find_section {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin: 20px 0;
      }

      .dropdown-container {
        display: flex;
        justify-content: flex-start;
        gap: 20px;
      }

      .dropdown-1 {
        position: relative;
        display: inline-block;
        border: none;
        margin-left: 5px;
      }

      .dropdown-button-1 {
        background-color: #ffffff;
        color: #747474;
        padding: 0 0 0 0;
        font-size: 17px;
        font-weight: 700;
        border-bottom: 1px solid #ddd;
        border-top: 1px solid transparent;
        border-left: 1px solid transparent;
        border-right: 1px solid transparent;
        cursor: pointer;
        display: flex;
        align-items: center;
      }

      .dropdown-button-1 span {
        margin-left: 5px;
      }

      .dropdown-content {
        display: none;
        position: absolute;
        background-color: #f9f9f9;
        min-width: 100px;
        box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
        z-index: 1;
        border: 1px solid #ddd;
        border-radius: 5px;
        margin-top: 5px;
      }

      .dropdown-content {
        display: none;
      }

      .dropdown-content a {
        color: black;
        padding: 12px 16px;
        text-decoration: none;
        display: flex;
      }

      .dropdown-content a:hover {
        background-color: #e1dddd;
      }

      /* 해시태그 필터 칩 */
      .hashtags {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin: 10px 0 30px 0;
      }

      .hashtags span {
        color: #747474;
        padding: 8px 16px;
        border-radius: 16px;
        font-size: 14px;
        cursor: pointer;
        background: rgba(255, 255, 255, 0.8);
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 10px;
        border: 1px solid var(--Gray-pink1, #747474);
      }

      .hashtags span:hover {
        background: #f15b77;
        color: #fff;
        border: none;
      }

      .showroom .hashtags {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        position: absolute;
        top: 20px;
        left: 20px;
        margin: 0;
      }

      .showroom .hashtags span {
        padding: 5px 10px;
        border-radius: 16px;
        background: rgba(255, 255, 255, 0.8);
        color: var(--Gray-red1, #333);
        font-size: 12px;
        font-style: normal;
        font-weight: 700;
        line-height: 160%;
      }

      /* .warning {
        display: flex;
        flex-direction: column;
        padding: 20px 20px 10px 20px;
        margin-bottom: 20px;
        border: none;
        border-radius: 20px;
        background-color: #f7f7f7;

        color: var(--Gray-pink1, #8c898a);
        font-family: Pretendard;
        font-size: 14px;
        font-style: normal;
        font-weight: 500;
        line-height: 180%;
        letter-spacing: -0.4px;

        border-radius: 32px;
        background: var(--Background-gray2, #f7f7f7);
        box-shadow: 0px 4px 11.9px 0px rgba(0, 0, 0, 0.2);
      }

      .warning .warning_text_mo {
        margin: 0;
        color: var(--BI-color-main1, #ff4081);
        font-family: Pretendard;
        font-size: 16px;
        font-style: normal;
        font-weight: 800;
        line-height: 180%;
        letter-spacing: -0.4px;
      }

      .warning .close-warning {
        background: none;
        border: none;
        font-size: 16px;
        font-weight: bold;
        color: var(--Gray-pink1, #8c898a);
        cursor: pointer;
      } */

      .showroom .image-container .distance_section {
        position: absolute;
        background: rgba(17, 17, 17, 0.75);
        top: 10px;
        right: 10px;
        gap: 4px;
        justify-content: center;
        align-items: center;
        padding: 4px 10px;
        box-sizing: border-box;
        border-radius: 10px;
      }

      .distance {
        color: white;

        font-size: 15px;
        font-style: normal;
        font-weight: 700;
        line-height: 160%;
        /* 22.4px */
      }

      .photographer {
        position: absolute;
        bottom: 14px;
        left: 10px;

        font-size: 12px;
        font-weight: 500;
        text-decoration: underline;
        color: white;
        /* 글자 색상 흰색 */
        padding: 5px 10px;
        /* 패딩을 추가하여 텍스트 주위의 공간을 확보 */
        border-radius: 36px;
        /* 모서리를 둥글게 설정 */
        display: inline-block;
        /* 인라인 블록 요소로 설정하여 텍스트 크기에 맞게 크기 조절 */
        border: 1px solid rgba(255, 255, 255, 0.1);
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(4px);
      }

      .showroom {
        margin-bottom: 30px;
        border-radius: 15px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1), 0 6px 10px rgba(0, 0, 0, 0.18);
        /* 하단 부분을 더 진하게 설정 */
        overflow: hidden;
        background: white;
      }

      .showroom .image-container {
        position: relative;
      }

      .showroom .image-container img {
        width: 100%;
        border-top-left-radius: 15px;
        border-top-right-radius: 15px;
      }

      .showroom .img_hashtags {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        position: absolute;
        top: 14px;
        left: 10px;
        margin: 0;
      }

      .showroom .img_hashtags span {
        padding: 5px 10px;
        border-radius: 16px;
        background: rgba(255, 255, 255, 0.8);

        color: var(--Gray-red1, #333);

        font-size: 12px;
        font-style: normal;
        font-weight: 700;
        line-height: 160%;
        /* 19.2px */
      }

      .showroom_info {
        display: flex;
        flex-direction: column;
        align-items: start;
        padding: 18px 24px;
      }

      .showroom_info h3 {
        color: var(--Black-red, #111);
        font-family: Montserrat;
        font-size: 20px;
        font-style: normal;
        font-weight: 700;
        line-height: 180%;
        /* 36px */
        letter-spacing: -0.4px;
        margin: 0;
      }

      .showroom_info p {
        color: var(--Gray-pink1, #8c898a);
        font-size: 14px;
        font-style: normal;
        font-weight: 400;
        line-height: 180%;
        letter-spacing: -0.4px;
        text-align: justify;
        margin: 0;
      }

      .showroom_info .reservation {
        display: inline-flex;
        padding: 2px 12px;
        justify-content: center;
        align-items: center;
        gap: 4px;
        border-radius: 15.738px;
        background: var(--Background-gray2, #f7f7f7);
        margin-top: 14px;
      }

      .button_icon {
        width: 24px;
        height: 24px;
        margin-right: 8px;
      }

      .reservation {
        display: inline-block;
        padding: 10px 20px;
        background-color: #f2f2f2;
        border-radius: 20px;
        margin-bottom: 20px;

        color: var(--Gray-red4, #888);

        font-size: 14px;
        font-style: normal;
        font-weight: 700;
        line-height: 160%;
        /* 22.4px */
      }

      .icons {
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 20px;
        margin-top: 10px;
        margin-bottom: 10px;
      }

      .icon {
        width: 44px;
        height: 44px;
        background-color: #f2f2f2;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .icon_telephone_mo {
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: #333;
        width: 100px;
        padding: 15px;
      }

      .icon_telephone_mo a {
        color: white;
      }

      .icon svg {
        width: 24px;
        height: 24px;
      }

      .showroom-info h3 {
        margin: 0;
      }

      .no-results {
        text-align: center;
        padding: 20px;
      }

      .no-results-icon {
        font-size: 50px;
        color: #ccc;
        margin-bottom: 20px;
      }

      .no_results_icon_search {
        font-size: 24px;
        color: #ccc;
        margin-bottom: 10px;
      }

      .no_results_text_search {
        color: var(--Gray-pink1, #8c898a);
        font-size: 14px;
        font-style: normal;
        font-weight: 700;
        line-height: 160%;
      }

      .no-results-text {
        color: var(--Gray-pink1, #8c898a);

        font-size: 14px;
        font-style: normal;
        font-weight: 700;
        line-height: 160%;
      }

      .no-results-highlight {
        color: #ff4081;
      }

      .no_results_highlight_search {
        color: #ff4081;
      }

      .no-results-subtext {
        font-size: 14px;
        color: #aaa;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }

        100% {
          transform: rotate(360deg);
        }
      }

      .loading-spinner {
        border: 8px solid #f3f3f3;
        border-top: 8px solid #ff4081;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 2s linear infinite;
        margin: 20px auto;
      }

      .review_section {
        position: relative;
        width: 100%;
        padding: 0 24px 18px 24px;
        box-sizing: border-box;
        /* 패딩을 포함하여 요소의 너비를 계산 */
      }

      .review_title {
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 100%;
        /* 제목을 포함한 전체 너비 */
        box-sizing: border-box;
        /* 패딩을 포함하여 요소의 너비를 계산 */
      }

      .review_title h3 {
        color: var(--Black-red, #111);
        font-size: 18px;
        font-style: normal;
        font-weight: 700;
        line-height: 120%;
        /* 21.6px */
        letter-spacing: -0.4px;
      }

      .toggle_reviews {
        background: none;
        border: none;
        cursor: pointer;
        font-size: 14px;
        color: #000;
        display: flex;
        align-items: center;
        gap: 4px;
      }

      .review_box {
        width: 100%;
        /* 부모 요소의 너비에 맞춤 */
        background: #ffffff;
        margin-bottom: 10px;
        box-sizing: border-box;
        /* 패딩을 포함하여 요소의 너비를 계산 */
        overflow: hidden;
        /* 넘치는 콘텐츠를 숨김 */
        display: flex;
        flex-direction: column;
        padding: 20px 20px 18px 20px;

        gap: 12px;
        border-radius: 32px;
        border: 1px solid var(--Background-gray1, #f2f2f2);
        box-shadow: 0px 4px 11.9px 0px rgba(0, 0, 0, 0.06);
      }

      .review_box a {
        display: inline-block;
        /* Make sure it respects padding */
        color: #888;
        word-wrap: break-word;
        /* 줄바꿈을 강제로 적용 */
        overflow-wrap: break-word;
        /* 단어가 길 때 줄바꿈 적용 */
        word-break: break-all;
        /* 단어가 길 경우 단어를 자르기 */
        white-space: normal;
        /* 링크의 공백 처리 */
        box-sizing: border-box;
        /* 패딩을 포함하여 요소의 너비를 계산 */
      }

      .review_box a:visited {
        color: #ff4081;
      }

      .review_box p {
        margin: 0;
        word-wrap: break-word;
        /* 줄바꿈을 강제로 적용 */
        overflow-wrap: break-word;
        /* 단어가 길 때 줄바꿈 적용 */
        word-break: break-all;
        /* 단어가 길 경우 단어를 자르기 */
        box-sizing: border-box;
        /* 패딩을 포함하여 요소의 너비를 계산 */
        color: var(--Gray-red4, #888);
        text-align: justify;
        font-size: 14px;
        font-style: normal;
        font-weight: 500;
        line-height: 160%;
        /* 22.4px */
        text-decoration-line: underline;
      }

      .review_box .quote_icon {
        display: flex;
        gap: 4px;
      }

      .review_box .quote_icon {
        margin: 0;
        word-wrap: break-word;
        /* 줄바꿈을 강제로 적용 */
        overflow-wrap: break-word;
        /* 단어가 길 때 줄바꿈 적용 */
        word-break: break-all;
        /* 단어가 길 경우 단어를 자르기 */
        box-sizing: border-box;
        /* 패딩을 포함하여 요소의 너비를 계산 */
        color: var(--Gray-red4, #888);
        text-align: justify;
        font-size: 14px;
        font-style: normal;
        font-weight: 500;
        line-height: 160%;
        /* 22.4px */
        text-decoration-line: underline;
      }

      .review_box .blogger_name {
        text-align: right;
        color: #888;
        width: 100%;
        /* 부모 요소의 너비에 맞춤 */
        box-sizing: border-box;
        /* 패딩을 포함하여 요소의 너비를 계산 */
        text-decoration-line: none;
        font-size: 12px;
        font-style: normal;
        font-weight: 500;
        line-height: 160%;
        /* 19.2px */
      }

      .chevron {
        width: 14px;
        height: 14px;
      }

      .quote_icon {
        display: flex;
        align-items: center;
        gap: 4px;
      }

      .showroom_buttons {
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: relative;
        margin-top: 20px;
        background-color: #ff4081;
        border-bottom-left-radius: 15px;
        border-bottom-right-radius: 15px;
      }

      .info_button {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: #ff4081;
        color: white;
        padding: 15px;
        font-size: 16px;
        font-weight: bold;
        border: none;
        cursor: pointer;
        line-height: 160%;
        /* 25.6px */
        letter-spacing: -0.4px;
      }

      .info_button img {
        margin-right: 8px;
      }

      .reservation_required {
        background-color: #ff4081;
        color: white;
        padding: 5px 10px 4px 10px;
        border-radius: 15px;
        font-size: 11px;
        font-weight: bold;
        line-height: 160%;
        /* 16px */
        position: absolute;
        right: 4px;
        top: -35px;
        /* 말풍선 위치 조정 */
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 100;
        overflow: visible;
        /* 영역 밖으로 나간 요소가 보이도록 설정 */
      }

      .reservation_required::after {
        content: "";
        position: absolute;
        top: 100%;
        /* 말꼬리를 아래로 이동 */
        left: 50%;
        /* 말꼬리의 좌우 위치를 가운데로 조정 */
        transform: translateX(-50%);
        /* 말꼬리를 정확히 가운데로 맞춤 */
        width: 0;
        height: 0;
        border-left: 5px solid transparent;
        border-right: 5px solid transparent;
        border-top: 5px solid #ff4081;
        /* 말꼬리 색상 */
      }

      /* CTA 버튼 */
      .floCtaPc_container {
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100%;
        max-width: 500px;
        position: fixed;
        bottom: -10px;
        z-index: 999;
        background: linear-gradient(180deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.7) 76%, #fff 100%);
        transition: all 0.5s ease-in-out;
        opacity: 0;
      }

      .floCtaPc_container.show_cta {
        display: flex;
        justify-content: center;
        align-items: center;
        bottom: 0;
        opacity: 1;
      }

      .floCtaPc {
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        width: 78%;
        padding: 14px 0 10px 0;
        border-radius: 12px;
        background: #ff4081;
        margin-bottom: 7px;
        cursor: pointer;
      }

      .floCtaPcwidth {
        display: flex;
        justify-content: center;
        width: 100%;
      }

      .cta_text {
        color: #fff;
        text-align: center;
        font-size: 16px;
        font-style: normal;
        font-weight: 700;
        line-height: 140%;
        margin-left: 14px;
      }

      .badge {
        position: absolute;
        top: -5px;
        right: -5px;
        background-color: rgb(64, 63, 63);
        color: white;
        border-radius: 50%;
        width: 20px; /* 원의 고정된 가로 크기 */
        height: 20px; /* 원의 고정된 세로 크기 */
        display: flex;
        justify-content: center;
        align-items: center; /* 텍스트를 중앙에 수직/수평 정렬 */
        font-size: 12px;
        line-height: 20px; /* 숫자를 중앙에 정확히 위치시키기 위한 line-height */
        text-align: center;
        padding: 0; /* 패딩 제거 */
        margin: 0; /* 마진 제거 */
        display: none; /* 처음에는 보이지 않음 */
        white-space: nowrap; /* 텍스트가 줄바꿈되지 않도록 설정 */
        overflow: hidden; /* 원 크기를 넘지 않도록 설정 */
      }
    </style>
  </head>
  <body>
    <!-- 네비게이션 바 -->
    <nav>
      <div class="menu-icon" onclick="toggleMenu()">&#9776;</div>
      <div class="logo">
        <a href="#">
          <img src="https://cdn.imweb.me/thumbnail/20240914/4b9457f7ca91f.png" alt="하이쏘 로고" />
        </a>
      </div>
    </nav>
    <main>
      <div class="container_mo">
        <div class="search-bar">
          <input type="text" id="search_input_mo" placeholder="주소, 쇼룸명, 쇼룸 타입, 브랜드 검색" enterkeyhint="쇼룸 찾기" />
          <div id="autocomplete-results" class="autocomplete-results"></div>
          <div id="clear_btn_mo">
            <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 12 12" fill="none">
              <path d="M1 1L11 11M11 1L1 11" stroke="#C4C4C4" stroke-width="2" />
            </svg>
          </div>
          <div class="search_icon_btn">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="search-icon">
              <g class="icn_find">
                <path
                  class="ellipse"
                  d="M14.5882 14.5882L19 19M16.3529 10.1765C16.3529 13.5876 13.5876 16.3529 10.1765 16.3529C6.7653 16.3529 4 13.5876 4 10.1765C4 6.7653 6.7653 4 10.1765 4C13.5876 4 16.3529 6.7653 16.3529 10.1765Z"
                  class="ellipse"
                  stroke="#D4D4D4"
                  stroke-width="2"
                ></path>
              </g>
            </svg>
          </div>

          <div class="recommended" id="recommended">
            <div class="keywords">추천 태그</div>
            <div class="chips">
              <div class="keyword">신세계</div>
              <div class="keyword">소공로</div>
              <div class="keyword">주차가능</div>
              <div class="keyword">칼한센앤선</div>
              <div class="keyword">방문 전 예약필수</div>
              <div class="keyword">아르테미데</div>
              <div class="keyword">루이스폴센</div>
              <div class="keyword">플로스</div>
            </div>
          </div>
        </div>
        <button id="find-nearby-stores" class="find-nearby-stores">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path
              class="finder_icon"
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M11 14.9C10.6769 14.9656 10.3425 15 10 15C9.65753 15 9.32311 14.9656 9 14.9V20H11V14.9ZM14.9 11C14.9656 10.6769 15 10.3425 15 10C15 9.65753 14.9656 9.32311 14.9 9H20V11H14.9ZM11 5.10002V0H9V5.10002C9.32311 5.03443 9.65753 5 10 5C10.3425 5 10.6769 5.03443 11 5.10002ZM5.10002 9H0V11H5.10002C5.03443 10.6769 5 10.3425 5 10C5 9.65753 5.03443 9.32311 5.10002 9Z"
              fill="#C4C4C4"
            />
            <circle cx="10" cy="10" r="8" stroke="#C3C3C3" stroke-width="2" />
          </svg>
          가까운 쇼룸 찾기
        </button>
        <div class="find_section">
          <div class="dropdown-container">
            <div class="dropdown-1" id="dropdown-sido">
              <button class="dropdown-button-1">시도 선택 <span>&#9662;</span></button>
              <div class="dropdown-content" id="dropdown-sido-content">
                <a href="#">전체</a>
                <a href="#">서울</a>
                <a href="#">부산</a>
                <a href="#">대전</a>
                <a href="#">인천</a>
                <a href="#">대구</a>
                <a href="#">광주</a>
                <a href="#">울산</a>
                <a href="#">경기</a>
                <a href="#">경남</a>
                <a href="#">전북</a>
                <a href="#">제주</a>
              </div>
            </div>
            <div class="dropdown-1" id="dropdown-gwonyeok" style="display: none">
              <button class="dropdown-button-1">권역 선택 <span>&#9662;</span></button>
              <div class="dropdown-content" id="dropdown-gwonyeok-content"></div>
            </div>
          </div>
        </div>
        <div class="tags">
          <div class="hashtags">
            <span>#백화점</span>
            <span>#브랜드쇼룸</span>
            <span>#편집샵</span>
            <span>#빈티지샵</span>
            <span>#리빙샵</span>
            <span>#방문 전 예약필수</span>
            <span>#기타</span>
          </div>
        </div>

        <!-- <div class="warning">
        <div style="
                display: flex;
                justify-content: space-between;
                align-self: center;
                width: 100%;
              ">
          <p class="warning_text_mo">✅ 쇼룸 방문 전, 꼭 확인해보세요!</p>
          <button class="close-warning">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path d="M6 6L18 18M18 6L6 18" stroke="#8C898A" />
            </svg>
          </button>
        </div>
        <p>
          쇼룸 전시 일정이 바뀔 수 있어요.방문 전에 전화로 미리 확인해보세요
          :&#41;
        </p>
      </div> -->

        <div id="showroom-results"></div>
        <div id="loading-spinner" class="loading-spinner" style="display: none"></div>
      </div>
    </main>

    <!-- 불투명한 배경 레이어 -->
    <div id="overlay" class="overlay"></div>

    <!-- 사이드 메뉴 -->
    <div id="sideMenu" class="side-menu">
      <a href="#" class="close-btn" onclick="toggleMenu()">&times;</a>
      <a href="#">쇼룸찾기</a>
      <a href="#">조명추천 리포트 샘플</a>
      <a href="#">비교견적 리포트 샘플</a>
    </div>

    <div class="floCtaPc_container" id="cta-button">
      <div class="floCtaPc">
        <div class="floCtaPcwidth">
          <svg width="27" height="26" viewBox="0 0 27 26" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g id="icn_talk">
              <g id="icn_talk_2">
                <path
                  id="Union"
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M13.3417 23C19.1407 23 23.8417 18.299 23.8417 12.5C23.8417 6.70101 19.1407 2 13.3417 2C7.54275 2 2.84174 6.70101 2.84174 12.5C2.84174 14.3773 3.33438 16.1394 4.19743 17.6643L1.68092 21.3249C1.12323 22.1361 1.94992 23.1802 2.86742 22.8234L7.30998 21.0957C9.01671 22.2956 11.097 23 13.3417 23Z"
                  fill="white"
                />
                <circle id="Ellipse 11" cx="8.3418" cy="12.5" r="1.5" fill="#FF4081" />
                <circle id="Ellipse 12" cx="13.3418" cy="12.5" r="1.5" fill="#FF4081" />
                <circle id="Ellipse 13" cx="18.3418" cy="12.5" r="1.5" fill="#FF4081" />
              </g>
            </g>
          </svg>
          <span class="badge"></span>
          <!-- 뱃지를 표시할 공간 -->
          <div class="cta_text">무료 쇼핑 컨시어지 신청하기</div>
        </div>
      </div>
    </div>

    <script>
      function toggleMenu() {
        const sideMenu = document.getElementById("sideMenu");
        const overlay = document.getElementById("overlay");
        sideMenu.classList.toggle("open");
        overlay.classList.toggle("show");
      }
    </script>

    <script>
      const showroomData = [
        {
          쇼룸명: "신세계 본점 칼한센앤선",
          타입1: "백화점",
          타입2: "",
          취급브랜드: "칼한센앤선",
          영문명: "Carl Hansen & Søn, Carl Hansen & Son",
          소개: "덴마크의 칼한센앤선 한스 J. 웨그너의 CH889 의자를 포함한 하이엔드 가구들을 만나보실 수 있습니다. 명품 가구 브랜드로서 미니멀리즘 디자인과 실용적인 기능성이 결합된 다양한 가구들의 체험 및 구매가 가능합니다.",
          blog_1_name: "마늘다지기",
          blog_1_title: "칼한센 CH88T 구입 / 신세계본점 칼한센",
          blog_1_link: "https://blog.naver.com/piu0208/222686097734",
          blog_1_content:
            "사실 앤트체어는 이쁘긴 한데 편한 의자는 아니여서 세븐 체어랑 CH88이 확실히 더 편하다. 그리고 저 휘어진 라인이 너무 맘에들어서 보기만 해도 널뛰기하는 기분이 고요해진다.",
          blog_2_name: "TESS",
          blog_2_title: "신세계백화점 본점 - 칼한센앤선, 스토케 등 쇼핑 후기 (feat. 딘앤델루카, 꾸까 등)",
          blog_2_link: "https://m.blog.naver.com/imryou7/222229482897",
          blog_2_content:
            "덴마크 디자인 체어 브랜드로  Ch88이라는 의자가 아주 멋졌습니다. \n마음에 들었던 매력적인 색상의 의자! 등받이이자 팔걸이가 멋스러우면서 편해서 좋았습니다.",
          blog_3_name: "마리끌레르_editor손정현",
          blog_3_title: "콘서트홀을 빛내는 베가 체어 #칼한센앤선",
          blog_3_link:
            "https://www.marieclairekorea.com/newnew/2024/07/%ec%bd%98%ec%84%9c%ed%8a%b8%ed%99%80%ec%9d%84-%eb%b9%9b%eb%82%b4%eb%8a%94-%eb%b2%a0%ea%b0%80-%ec%b2%b4%ec%96%b4-%ec%b9%bc%ed%95%9c%ec%84%bc%ec%95%a4%ec%84%a0/?utm_source=naver&utm_medium=partnership",
          blog_3_content:
            "칼한센앤선의 클래식한 베가 체어가 스틸 프레임 버전으로 찾아왔습니다. 실용성과 디자인을 모두 잡은 의자를 사진으로 만나보세요.\n\n칼한센앤선이 실용적이고 우아한 베가 체어를 소개합니다. 기존 블랙 프레임에 이어 새롭게 출시된 베가 체어는 크롬 도금된 스틸 프레임으로, 공간을 한층 세련되게 만들어 주는데요. 가벼운 무게로 의자를 겹쳐 쌓을 수 있어 호텔이나 공공장소에서 활용하기 좋죠.\n\n베가 체어의 역사는 1956년으로 거슬러 올라갑니다. 전설적인 건축가 빌헬름 라우리첸(Vilhelm Lauritzen)이 코펜하겐 베스터브로에 위치한 베가 콘서트홀을 설계하며 이 의자를 탄생시켰는데요. 빌헬름 라우리첸은 가구, 우드 패널, 샹들리에에서부터 조명 기구, 문 손잡이, 소켓 등의 작은 디테일에 이르기까지 베가 콘서트홀의 모든 것을 디자인했습니다. 그 결과 콘서트홀에 딱 맞는 이상적인 의자를 완성할 수 있었죠.\n\n이렇게 탄생한 베가 체어는 2022년에 이르러 칼한센앤선과 빌헬름 라우리첸 건축 사무소의 협력으로 대중들에게 공개되었습니다. 그리고 올해 스틸 프레임 베가 체어가 새롭게 출시된 것이죠.\n\n크롬 도금된 스틸 프레임이 베가 체어의 따뜻한 우드, 패브릭과 아름다운 대비를 만들어 냅니다. 등받이의 미세한 곡선 역시 독특한 포인트 중 하나인데요. 다리 부분이 견고한 오크 소재로 마감되어 고급스러운 매력을 자아냅니다. 공간을 효율적으로 활용할 수 있는 것도 장점. 의자를 최대 8개까지 쌓을 수 있는 구조가 돋보이죠. 베가 체어를 공간에 배치하기만 해도 멋스러움을 뽐낼 수 있답니다.\n\n칼한센앤선의 스타일리시한 베가 체어와 함께 공간에 새로운 생명을 불어넣을 영감을 받아보세요.",
          시도: "서울",
          권역: "명동.을지로.종로",
          주소: "서울 중구 소공로 63, 7층",
          사진: "https://cdn.imweb.me/upload/S20240507ae9d7abf11ed7/b5e13ce2a2b2c.png",
          사진포스트링크: "https://map.naver.com/p/entry/place/1983029597?c=15.00,0,0,0,dh",
          사진작가: "업체등록사진",
          네이버지도: "https://map.naver.com/p/entry/place/1983029597?c=15.00,0,0,0,dh",
          위도: "37.5609",
          경도: "126.9809",
          연락처: "02-310-5051",
          예약_필요: "",
          인스타그램: "https://www.instagram.com/carlhansenandson/",
          동영상: "",
          회사홈페이지: "https://www.carlhansen.com/en/en",
          참고: "https://www.stayh.co.kr/product/offline_list.html?cate_no=135"
        }
      ];

      document.addEventListener("DOMContentLoaded", function () {
        // 드롭다운을 초기 상태로 되돌리는 함수
        function resetDropdowns() {
          document.querySelectorAll(".dropdown-button-1").forEach((button) => {
            button.style.color = "#c1c1c1"; // 초기 색상으로 변경
          });
          // 시도 드롭다운 초기화
          const sidoButton = document.querySelector("#dropdown-sido .dropdown-button-1");
          sidoButton.innerHTML = `시도 선택 <span>&#9662;</span>`;
          selectedSido = null;

          // 권역 드롭다운 초기화
          const gwonyeokButton = document.querySelector("#dropdown-gwonyeok .dropdown-button-1");
          gwonyeokButton.innerHTML = `권역 선택 <span>&#9662;</span>`;
          selectedGwonyeok = null;
          gwonyeokDropdownContainer.style.display = "none"; // 권역 드롭다운 숨김
        }

        // 해시태그 검색을 초기 스타일로 되돌리는 함수
        function resetHashtags() {
          document.querySelectorAll(".hashtags span").forEach((hashtag) => {
            hashtag.style.backgroundColor = "#fff";
            hashtag.style.color = "#555";
            hashtag.style.border = "1px solid #ddd";
          });
        }

        // 검색어 하이라이트
        function highlightText(text, query) {
          if (!query) return text;
          const regex = new RegExp(`(${query})`, "gi");
          return text.replace(regex, '<span class="highlight">$1</span>');
        }

        // 검색 상수
        const searchBar = document.querySelector(".search-bar");
        const searchInput = document.getElementById("search_input_mo");
        const autocompleteResults = document.getElementById("autocomplete-results");
        const clearBtn = document.getElementById("clear_btn_mo");
        const recommendedBox = document.getElementById("recommended");
        const keywords = document.querySelectorAll(".chips .keyword");
        const searchIconBtn = document.querySelector(".search_icon_btn");

        // 쇼룸 영역 상수
        const showroomResults = document.getElementById("showroom-results");

        // 경고 영역 상수
        // const warning = document.querySelector(".warning");
        // const closeWarningButton = document.querySelector(".close-warning");

        // 스피너 상수/변수 및 스타일 설정
        const loadingIndicator = document.createElement("div");
        const loadingSpinner = document.getElementById("loading-spinner");
        let currentIndex = 0;
        const resultsPerPage = 10;
        let isFetching = false;
        loadingIndicator.style.textAlign = "center";
        loadingIndicator.style.padding = "20px";
        showroomResults.parentElement.appendChild(loadingIndicator);
        loadingIndicator.style.display = "none";

        // 초기 데이터 렌더링
        displayInitialResults(showroomData);

        // [검색 및 추천 검색어]
        // 1. 검색 이벤트 리스너
        searchInput.addEventListener("focus", () => {
          recommendedBox.style.display = "flex";
          autocompleteResults.style.display = "none";
        });
        searchInput.addEventListener("blur", () => {
          if (!document.activeElement.closest(".search-bar")) {
            recommendedBox.style.display = "none";
            autocompleteResults.style.display = "none";
          }
        });
        searchInput.addEventListener("input", () => {
          resetDropdowns(); // 드롭다운 초기화 함수 호출
          resetHashtags();
          handleAutocomplete();
        });
        searchInput.addEventListener("keyup", (event) => {
          if (event.key === "Enter") {
            resetDropdowns(); // 드롭다운 초기화 함수 호출
            resetHashtags();
            handleSearch(); // 엔터 키를 눌렀을 때 검색 실행
            searchInput.blur(); // 입력 필드의 포커스 해제
          }
        });
        searchIconBtn.addEventListener("click", () => {
          resetDropdowns(); // 드롭다운 초기화 함수 호출
          resetHashtags();
          handleSearch(); // 검색어를 전달하여 검색 실행
        });

        // 2. 검색 함수들
        // 검색어 자동완성 함수
        function handleAutocomplete() {
          const query = searchInput.value.toLowerCase();
          autocompleteResults.innerHTML = "";
          const filteredData = showroomData.filter((showroom) => {
            return (
              (showroom.타입1 && showroom.타입1.toLowerCase().includes(query)) ||
              (showroom.타입2 && showroom.타입2.toLowerCase().includes(query)) ||
              (showroom.쇼룸명 && showroom.쇼룸명.toLowerCase().includes(query)) ||
              (showroom.주소 && showroom.주소.toLowerCase().includes(query)) ||
              (showroom.취급브랜드 && showroom.취급브랜드.toLowerCase().includes(query)) ||
              (showroom.영문명 && showroom.영문명.toLowerCase().includes(query))
            );
          });
          if (filteredData.length > 0) {
            recommendedBox.style.display = "none";
            autocompleteResults.style.display = "block";
            autocompleteResults.classList.add("active");
            clearBtn.style.display = "flex";

            filteredData.forEach((item) => {
              const div = document.createElement("div");
              div.classList.add("autocomplete-item");
              div.textContent = item.쇼룸명;
              autocompleteResults.appendChild(div);
              // 동적으로 생성된 .autocomplete-item에 클릭 이벤트 리스너 추가
              div.addEventListener("mousedown", (event) => {
                autocompleteResults.innerHTML = "";
                autocompleteResults.classList.remove("active");
                div.textContent = item.쇼룸명;
                handleKeywordClick(event); // 선택된 텍스트를 인자로 전달하여 함수 호출
              });
            });
          } else {
            recommendedBox.style.display = "none";
            autocompleteResults.style.display = "block";
            autocompleteResults.classList.add("active");
            const div = document.createElement("div");
            div.style.display = "flex";
            div.style.justifyContent = "center";
            div.innerHTML = `
                  <div class="no_results_icon_search">😅</div>
                  <p class="no_results_text_search">
                    '<span class="no_results_highlight_search">${query}</span>'으로 쇼룸을 찾지 못했어요.
                  </p>
                `;
            autocompleteResults.appendChild(div);
            clearBtn.style.display = "flex";
          }
        }
        clearBtn.addEventListener("mousedown", (event) => {
          event.preventDefault(); // 기본 동작 방지
        });
        clearBtn.addEventListener("click", () => {
          console.log("클리어버튼");
          searchInput.value = "";
          resetDropdowns();
          resetHashtags();
          displayInitialResults(showroomData);
          autocompleteResults.style.display = "none";
          recommendedBox.style.display = "flex";
          clearBtn.style.display = "none";
          searchInput.focus();
        });
        recommendedBox.addEventListener("mousedown", (event) => event.preventDefault());
        keywords.forEach((keyword) => {
          keyword.addEventListener("click", (event) => {
            resetDropdowns();
            resetHashtags();
            handleKeywordClick(event);
          });
        });

        // [ 시도 / 권역 선택]
        // 1. .dropdown-content a 클릭 이벤트 추가
        document.querySelectorAll("#dropdown-sido-content a").forEach((link) => {
          link.addEventListener("click", function () {
            const dropdownButton = this.closest(".dropdown-1").querySelector(".dropdown-button-1");
            dropdownButton.style.color = "#ff4081"; // 색상 변경
            searchInput.value = "";
            document.querySelector("#dropdown-gwonyeok .dropdown-button-1").style = ""; //권역버튼 색상 초기화
            selectedGwonyeok = null; //권역정보 초기화
            //                resetHashtags(); //태그 리셋 삭제
            // 권역 드롭다운 이벤트 리스너 추가
            addGwonyeokEventListeners();
          });
        });
        function addGwonyeokEventListeners() {
          document.querySelectorAll("#dropdown-gwonyeok-content a").forEach((link) => {
            link.addEventListener("click", function () {
              const dropdownButton = this.closest(".dropdown-1").querySelector(".dropdown-button-1");
              dropdownButton.style.color = "#ff4081"; // 색상 변경
              //                    resetHashtags(); //태그 리셋 삭제
            });
          });
        }

        // [가까운 쇼룸 찾기]
        const findNearbyStoresButton = document.getElementById("find-nearby-stores");

        let cachedPosition = null;

        findNearbyStoresButton.addEventListener("click", function () {
          resetDropdowns(); // 드롭다운 초기화 함수 호출
          //            resetHashtags();    //해시태그 초기화 삭제
          clearBtn.style.display = "none";
          searchInput.value = "";
          if (findNearbyStoresButton.classList.contains("active")) {
            findNearbyStoresButton.classList.remove("active");
            clearNearbyStores();
          } else {
            findNearbyStoresButton.classList.add("active");
            if (cachedPosition) {
              showNearbyStores(cachedPosition);
            } else if (navigator.geolocation) {
              navigator.geolocation.getCurrentPosition(
                (position) => {
                  cachedPosition = position;
                  locationPermissionGranted = true; // 플래그 설정
                  cachedNearbyStores = showroomData
                    .map((store) => {
                      const distance = getDistance(position.coords.latitude, position.coords.longitude, store.위도, store.경도);
                      return { ...store, distance: parseFloat(distance.toFixed(2)) }; // 소숫점 2자리로 반올림
                    })
                    .sort((a, b) => a.distance - b.distance);
                  showNearbyStores(position);
                },
                showError,
                { timeout: 3000 } // 3초 후에 타임아웃 설정
              );
            } else {
              alert("이 브라우저는 위치 정보를 지원하지 않습니다.");
            }
          }
        });

        function showNearbyStores(position) {
          const userLatitude = position.coords.latitude;
          const userLongitude = position.coords.longitude;

          var nearbyStores;
          if (selectedTag != "") {
            //필터 선택 되어있을 경우
            nearbyStores = showroomData.filter((showroom) =>
              Object.values(showroom).some((value) => value.toLowerCase().includes(selectedTag))
            );
            nearbyStores = nearbyStores
              .map((store) => {
                const distance = getDistance(userLatitude, userLongitude, store.위도, store.경도);
                return { ...store, distance: parseFloat(distance.toFixed(2)) }; // 소숫점 2자리로 반올림
              })
              .sort((a, b) => a.distance - b.distance);
          } else {
            nearbyStores = showroomData
              .map((store) => {
                const distance = getDistance(userLatitude, userLongitude, store.위도, store.경도);
                return { ...store, distance: parseFloat(distance.toFixed(2)) }; // 소숫점 2자리로 반올림
              })
              .sort((a, b) => a.distance - b.distance);
          }

          displayResults(nearbyStores.slice(0, 10)); // 가까운 10개 매장 표시
        }

        function clearNearbyStores() {
          // 거리 표시 내용 제거 로직
          displayResults(showroomData.slice(0, resultsPerPage)); // 초기 쇼룸 데이터 표시
        }

        function showError(error) {
          switch (error.code) {
            case error.PERMISSION_DENIED:
              alert(
                "위치 정보 접근을 허용하지 않으셔서 가까운 쇼룸찾기를 할 수 없어요. 필요하시면 위치정보 접근 허용을 해주시면 좋겠습니다."
              );
              findNearbyStoresButton.classList.remove("active");
              break;
            case error.POSITION_UNAVAILABLE:
              alert(
                "위치 정보를 사용할 수 없는 장소예요. 가령 지하철 이동하시는 경우에도 종종 그럴 수 있습니다. 이동 중이 아닐 때 다시 해보시겠어요? "
              );
              findNearbyStoresButton.classList.remove("active");
              break;
            case error.TIMEOUT:
              alert(
                "지하철같이 위치 정보 응답이 늦어지는 장소에서는 '가까운 쇼룸찾기가 어려워요'. 지하철과 같은 장소가 아니시라면 다시 한 번 해보시고 잘 안되시면 실외에서 다시 해보시면 좋겠어요"
              );
              findNearbyStoresButton.classList.remove("active");
              break;
            case error.UNKNOWN_ERROR:
              alert("저희가 지금까지 알지 못한 오류가 발생했어요. 최대한 파악해서 수정할게요^^;");
              findNearbyStoresButton.classList.remove("active");
              break;
          }
        }

        function getDistance(lat1, lon1, lat2, lon2) {
          const R = 6371; // 지구 반경 (km)
          const dLat = ((parseFloat(lat2) - parseFloat(lat1)) * Math.PI) / 180;
          const dLon = ((parseFloat(lon2) - parseFloat(lon1)) * Math.PI) / 180;
          const a =
            0.5 -
            Math.cos(dLat) / 2 +
            (Math.cos((parseFloat(lat1) * Math.PI) / 180) * Math.cos((parseFloat(lat2) * Math.PI) / 180) * (1 - Math.cos(dLon))) / 2;

          return R * 2 * Math.asin(Math.sqrt(a));
        }

        // function checkWarning() {
        // if (localStorage.getItem("warningClosed") === "true") {
        // warning.style.display = "none";
        // } else {
        // warning.style.display = "flex";
        // }
        // }

        // closeWarningButton.addEventListener("click", () => {
        // warning.style.display = "none";
        // localStorage.setItem("warningClosed", "true");
        // });

        // checkWarning();

        function handleInput() {
          const query = searchInput.value.toLowerCase();
          if (query.length > 0) {
            clearBtn.style.display = "block";
            searchAndDisplayResults(query);
          } else {
            clearBtn.style.display = "none";
            displayInitialResults(showroomData);
            recommendedBox.style.display = "flex";
          }
        }

        function handleSearch() {
          const query = searchInput.value.toLowerCase();
          if (query.length > 0) {
            clearBtn.style.display = "block";
            showLoadingSpinner(); // 로딩 스피너 표시
            searchAndDisplayResults(query);
            hideLoadingSpinner(); // 검색이 완료된 후 로딩 스피너 숨기기
          } else {
            clearBtn.style.display = "none";
            displayInitialResults(showroomData);
            recommendedBox.style.display = "none";
          }
        }

        function handleKeywordClick(event) {
          const query = event.target.textContent.toLowerCase();
          searchInput.value = query;
          searchAndDisplayResults(query);
          recommendedBox.style.display = "none";
          clearBtn.style.display = "flex";
          searchInput.blur();
        }

        // 리뷰 수에 따라 .toggle_reviews 버튼 표시 여부 설정
        function checkReviewToggleButtons() {
          const reviewSections = document.querySelectorAll(".review_section");
          reviewSections.forEach((section) => {
            const reviewBoxes = section.querySelectorAll(".review_box");
            const toggleButton = section.querySelector(".toggle_reviews");
            if (reviewBoxes.length <= 1) {
              toggleButton.style.display = "none";
            } else {
              toggleButton.style.display = "flex";
            }
          });
        }

        // 기존 toggleReviews 함수 수정
        function toggleReviews(button) {
          const reviewSection = button.closest(".review_section");
          const reviews = reviewSection.querySelector(".reviews");
          const reviewBoxes = reviews.querySelectorAll(".review_box");

          if (button.classList.contains("expanded")) {
            reviewBoxes.forEach((box, index) => {
              if (index > 0) {
                box.style.display = "none";
              }
            });
            button.classList.remove("expanded");
            button.innerHTML = `펼쳐보기 <svg xmlns="http://www.w3.org/2000/svg" width="11" height="5" viewBox="0 0 11 5" fill="none">
                                    <path d="M1 1L5.5 4L10 1" stroke="#A9A9A9"/>
                                  </svg>`;
          } else {
            reviewBoxes.forEach((box) => {
              box.style.display = "block";
            });
            button.classList.add("expanded");
            button.innerHTML = `접기 <svg xmlns="http://www.w3.org/2000/svg" width="11" height="5" viewBox="0 0 11 5" fill="none">
                                    <path d="M10 4L5.5 1L1 4" stroke="#A9A9A9"/>
                                  </svg>`;
          }
        }

        // 리뷰 토글 버튼에 이벤트 리스너 추가
        function addToggleEventListeners() {
          const toggleButtons = document.querySelectorAll(".toggle_reviews");
          toggleButtons.forEach((button) => {
            button.addEventListener("click", function () {
              toggleReviews(this);
            });
          });
        }

        // 이벤트 위임 사용하여 .toggle_reviews 버튼 클릭 이벤트 연결
        document.addEventListener("click", function (event) {
          if (event.target.closest(".toggle_reviews")) {
            toggleReviews(event.target.closest(".toggle_reviews"));
          }
        });

        function displayResults(results, searchQuery) {
          showroomResults.innerHTML = ""; // 기존 내용을 초기화

          const fragment = document.createDocumentFragment();
          results.forEach((result) => {
            const showroomDiv = document.createElement("div");
            showroomDiv.classList.add("showroom");

            // 검색어 하이라이트 기능 추가
            const highlightedName = highlightText(result.쇼룸명, searchQuery);
            const highlightedIntro = highlightText(result.소개, searchQuery);
            const highlightedAddress = highlightText(result.주소, searchQuery);

            showroomDiv.innerHTML = `
                        <div class="image-container">
                        <img src="${result.사진}" alt="${result.쇼룸명}" />
                        <div class="img_hashtags">
                            <span>#${result.타입1}</span>
                            ${result.타입2 ? `<span>#${result.타입2}</span>` : ""}
                            <span>#${result.권역}</span>
                        </div>
                        <a href="${result.사진포스트링크}" target="_blank">
                            <div class="photographer">
                            @ ${result.사진작가}
                            </div>
                        </a>
                        <div class="distance_section" ${result.distance ? 'style="display: flex;"' : 'style="display: none;"'}>
                            <svg class="distance" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none">
                            <path d="M6.99972 1.16699C4.42664 1.16699 2.33306 3.26058 2.33306 5.83074C2.31614 9.59033 6.82239 12.7077 6.99972 12.8337C6.99972 12.8337 11.6833 9.59033 11.6664 5.83366C11.6664 3.26058 9.5728 1.16699 6.99972 1.16699ZM6.99972 8.16699C5.71056 8.16699 4.66639 7.12283 4.66639 5.83366C4.66639 4.54449 5.71056 3.50033 6.99972 3.50033C8.28889 3.50033 9.33306 4.54449 9.33306 5.83366C9.33306 7.12283 8.28889 8.16699 6.99972 8.16699Z" fill="white"/>
                            </svg>
                            <div class="distance">  ${result.distance} km</div>
                        </div>
                        </div>
                        </div>
                        <div class="showroom_info">
                        <div style="display: flex; flex-direction: column; width:100%;">
                        <h3>${highlightedName}</h3>
                        <p style="color:#333">${highlightedAddress}</p>
                        <p>${highlightedIntro}</p>
                        
                        <div class="icons">
                        <div style="display:flex; gap:10px;">
                            ${
                              result.동영상
                                ? `
                            <a href="${result.동영상}" target="_blank" id="icon_youtube">
                            <div class="icon" >
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g id="jt-youtube">
                                <g id="Group">
                                    <path id="Exclude" fill-rule="evenodd" clip-rule="evenodd" d="M20.5978 4.71569C21.5447 4.96794 22.2898 5.71693 22.5421 6.67159C23 8.39853 22.9961 11.9999 22.9961 11.9999C22.9961 11.9999 22.9961 15.6012 22.5382 17.3281C22.2859 18.2789 21.5408 19.0279 20.5939 19.284C18.8786 19.7459 11.9981 19.7459 11.9981 19.7459C11.9981 19.7459 5.11748 19.7459 3.40219 19.284C2.45528 19.0318 1.71018 18.2828 1.45793 17.3281C1 15.6012 1 11.9999 1 11.9999C1 11.9999 1 8.39853 1.46181 6.66771C1.71406 5.71693 2.45916 4.96794 3.40607 4.71181C5.12136 4.25 12.0019 4.25 12.0019 4.25C12.0019 4.25 18.8786 4.25 20.5978 4.71569ZM9.7511 8.72842V15.2714L15.5024 11.9999L9.7511 8.72842Z" fill="#333333"/>
                                </g>
                                </g>
                            </svg>
                            </div>
                            </a>
                            `
                                : ""
                            }
                            ${
                              result.인스타그램
                                ? `
                            <a href="${result.인스타그램}" target="_blank" id="icon_instagram">
                            <div class="icon" >
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M11.9987 8.83398C10.287 8.83398 8.83203 10.2889 8.83203 12.0007C8.83203 13.7124 10.287 15.1673 11.9987 15.1673C13.7104 15.1673 15.1654 13.7124 15.1654 12.0007C15.1654 10.2889 13.7104 8.83398 11.9987 8.83398Z" fill="#333333"/>
                            <path d="M16.0591 2.5H8.02727C4.91818 2.5 2.5 4.91818 2.5 7.94091V15.9727C2.5 19.0818 4.91818 21.5 8.02727 21.5H16.0591C19.0818 21.5 21.5 19.0818 21.5 15.9727V7.94091C21.5 4.91818 19.0818 2.5 16.0591 2.5ZM12 17.0091C9.23636 17.0091 7.07727 14.7636 7.07727 12.0864C7.07727 9.40909 9.23636 7.07727 12 7.07727C14.7636 7.07727 16.9227 9.32273 16.9227 12C16.9227 14.6773 14.7636 17.0091 12 17.0091ZM17.0955 8.11364C16.4909 8.11364 15.9727 7.59545 15.9727 6.99091C15.9727 6.38636 16.4909 5.86818 17.0955 5.86818C17.7 5.86818 18.2182 6.38636 18.2182 6.99091C18.2182 7.59545 17.7 8.11364 17.0955 8.11364Z" fill="#333333"/>
                            </svg>
                            </div>
                            </a>
                            `
                                : ""
                            }
                        </div>
                    </div>
                
                `;

            if (result.blog_1_title || result.blog_2_title || result.blog_3_title) {
              const highlightedBlog1Title = result.blog_1_title ? highlightText(result.blog_1_title, searchQuery) : "";
              const highlightedBlog2Title = result.blog_2_title ? highlightText(result.blog_2_title, searchQuery) : "";
              const highlightedBlog3Title = result.blog_3_title ? highlightText(result.blog_3_title, searchQuery) : "";

              showroomDiv.innerHTML += `
          <div class="review_section">
            <div class="review_title">
              <h3>관련 포스팅</h3>
              <button class="toggle_reviews">
                펼쳐보기 
                <svg xmlns="http://www.w3.org/2000/svg" width="11" height="5" viewBox="0 0 11 5" fill="none">
                  <path d="M1 1L5.5 4L10 1" stroke="#A9A9A9"/>
                </svg>
              </button>
            </div>
            <div class="reviews">
              ${
                highlightedBlog1Title
                  ? `
              <div class="review_box">
                <div class="quote_icon">
                  <span class="quote_icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <path d="M7.8207 6.18958L8.42322 6.08057V4.17188H7.67381C5.58747 4.17188 3.99723 4.69391 2.94582 5.72375C1.53094 7.11042 1.67333 8.89115 1.67782 8.91146V14.3281C1.67782 14.5077 1.75678 14.6799 1.89732 14.8069C2.03786 14.9339 2.22847 15.0052 2.42723 15.0052H7.67306C8.49966 15.0052 9.17188 14.3979 9.17188 13.651V8.91146C9.17188 8.73188 9.09292 8.55967 8.95238 8.43269C8.81184 8.30571 8.62122 8.23438 8.42247 8.23438H5.36565C5.38213 7.96219 5.45782 7.61687 5.68714 7.28917C6.06859 6.74682 6.78577 6.37714 7.8207 6.18958Z" fill="#666666"/>
                    <path d="M16.9769 6.18958L17.5795 6.08057V4.17188H16.8301C14.7437 4.17188 13.1535 4.69391 12.1021 5.72375C10.6872 7.11042 10.8296 8.89115 10.8341 8.91146V14.3281C10.8341 14.5077 10.913 14.6799 11.0536 14.8069C11.1941 14.9339 11.3847 15.0052 11.5835 15.0052H16.8293C17.6559 15.0052 18.3281 14.3979 18.3281 13.651V8.91146C18.3281 8.73188 18.2492 8.55967 18.1086 8.43269C17.9681 8.30571 17.7775 8.23438 17.5787 8.23438H14.5219C14.5384 7.96219 14.6141 7.61687 14.8434 7.28917C15.2248 6.74682 15.942 6.37714 16.9769 6.18958Z" fill="#666666"/>
                    </svg>
                  </span> 
                  <a href="${result.blog_1_link}" target="_blank">${highlightedBlog1Title}</a>
                </div>
                <p class="blogger_name">_by ${result.blog_1_name}</p>
              </div>
              `
                  : ""
              }
              ${
                highlightedBlog2Title
                  ? `
              <div class="review_box" style="display: none;">
                <div class="quote_icon">
                  <span class="quote_icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                      <path d="M7.8207 6.18958L8.42322 6.08057V4.17188H7.67381C5.58747 4.17188 3.99723 4.69391 2.94582 5.72375C1.53094 7.11042 1.67333 8.89115 1.67782 8.91146V14.3281C1.67782 14.5077 1.75678 14.6799 1.89732 14.8069C2.03786 14.9339 2.22847 15.0052 2.42723 15.0052H7.67306C8.49966 15.0052 9.17188 14.3979 9.17188 13.651V8.91146C9.17188 8.73188 9.09292 8.55967 8.95238 8.43269C8.81184 8.30571 8.62122 8.23438 8.42247 8.23438H5.36565C5.38213 7.96219 5.45782 7.61687 5.68714 7.28917C6.06859 6.74682 6.78577 6.37714 7.8207 6.18958Z" fill="#666666"/>
                      <path d="M16.9769 6.18958L17.5795 6.08057V4.17188H16.8301C14.7437 4.17188 13.1535 4.69391 12.1021 5.72375C10.6872 7.11042 10.8296 8.89115 10.8341 8.91146V14.3281C10.8341 14.5077 10.913 14.6799 11.0536 14.8069C11.1941 14.9339 11.3847 15.0052 11.5835 15.0052H16.8293C17.6559 15.0052 18.3281 14.3979 18.3281 13.651V8.91146C18.3281 8.73188 18.2492 8.55967 18.1086 8.43269C17.9681 8.30571 17.7775 8.23438 17.5787 8.23438H14.5219C14.5384 7.96219 14.6141 7.61687 14.8434 7.28917C15.2248 6.74682 15.942 6.37714 16.9769 6.18958Z" fill="#666666"/>
                    </svg>
                  </span> 
                  <a href="${result.blog_2_link}" target="_blank">${highlightedBlog2Title}</a>
                </div>
                <p class="blogger_name">_by ${result.blog_2_name}</p>
              </div>
              `
                  : ""
              }
              ${
                highlightedBlog3Title
                  ? `
              <div class="review_box" style="display: none;">
                <div class="quote_icon">
                  <span class="quote_icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                      <path d="M7.8207 6.18958L8.42322 6.08057V4.17188H7.67381C5.58747 4.17188 3.99723 4.69391 2.94582 5.72375C1.53094 7.11042 1.67333 8.89115 1.67782 8.91146V14.3281C1.67782 14.5077 1.75678 14.6799 1.89732 14.8069C2.03786 14.9339 2.22847 15.0052 2.42723 15.0052H7.67306C8.49966 15.0052 9.17188 14.3979 9.17188 13.651V8.91146C9.17188 8.73188 9.09292 8.55967 8.95238 8.43269C8.81184 8.30571 8.62122 8.23438 8.42247 8.23438H5.36565C5.38213 7.96219 5.45782 7.61687 5.68714 7.28917C6.06859 6.74682 6.78577 6.37714 7.8207 6.18958Z" fill="#666666"/>
                      <path d="M16.9769 6.18958L17.5795 6.08057V4.17188H16.8301C14.7437 4.17188 13.1535 4.69391 12.1021 5.72375C10.6872 7.11042 10.8296 8.89115 10.8341 8.91146V14.3281C10.8341 14.5077 10.913 14.6799 11.0536 14.8069C11.1941 14.9339 11.3847 15.0052 11.5835 15.0052H16.8293C17.6559 15.0052 18.3281 14.3979 18.3281 13.651V8.91146C18.3281 8.73188 18.2492 8.55967 18.1086 8.43269C17.9681 8.30571 17.7775 8.23438 17.5787 8.23438H14.5219C14.5384 7.96219 14.6141 7.61687 14.8434 7.28917C15.2248 6.74682 15.942 6.37714 16.9769 6.18958Z" fill="#666666"/>
                    </svg>
                  </span> 
                  <a href="${result.blog_3_link}" target="_blank">${highlightedBlog3Title}</a>
                </div>
                <p class="blogger_name">_by ${result.blog_3_name}</p>
              </div>
              `
                  : ""
              }
            </div>
          </div>
        `;
            }

            showroomDiv.innerHTML += `
              <div class="showroom_buttons">
                  <button onclick="window.open('${result.네이버지도}', '_blank')" class="info_button">
                    <img src="https://cdn.imweb.me/upload/S20240507ae9d7abf11ed7/605cc0e936c44.png" alt="Naver Map" class="button_icon">자세히보기
                  </button>
                  ${result.예약_필요 ? `<div class="reservation_required">방문 전 예약 필수</div>` : ""}
                  <div class="icon_telephone_mo">
                    <a href="tel:${result.연락처}" class="telephone">
                      <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28" fill="none">
                        <path d="M21.3813 26.2505C20.3138 26.2505 18.8143 25.8644 16.5688 24.6098C13.8383 23.0786 11.7263 21.6649 9.01049 18.9562C6.39205 16.3395 5.11783 14.6452 3.33447 11.4001C1.31979 7.73602 1.66322 5.81539 2.04713 4.99453C2.50432 4.01344 3.17916 3.42664 4.05143 2.84422C4.54687 2.51961 5.07117 2.24135 5.61768 2.01297C5.67236 1.98945 5.72322 1.96703 5.76861 1.9468C6.03932 1.82484 6.44947 1.64055 6.969 1.83742C7.31572 1.96758 7.62526 2.23391 8.10979 2.71242C9.10346 3.69242 10.4613 5.875 10.9623 6.94688C11.2986 7.6693 11.5212 8.14617 11.5217 8.68102C11.5217 9.30719 11.2067 9.79008 10.8245 10.3112C10.7528 10.4091 10.6817 10.5027 10.6128 10.5934C10.1967 11.1403 10.1053 11.2984 10.1655 11.5805C10.2874 12.1477 11.1969 13.8359 12.6915 15.3272C14.1861 16.8185 15.8256 17.6705 16.3949 17.792C16.6892 17.8548 16.8505 17.7597 17.4149 17.3287C17.4958 17.267 17.5789 17.203 17.6659 17.139C18.2488 16.7053 18.7093 16.3985 19.3207 16.3985H19.324C19.8561 16.3985 20.3117 16.6293 21.0663 17.0099C22.0507 17.5065 24.2989 18.8469 25.2849 19.8416C25.7646 20.3251 26.032 20.6335 26.1627 20.9797C26.3596 21.5009 26.1742 21.9094 26.0533 22.1828C26.0331 22.2282 26.0106 22.278 25.9871 22.3332C25.7569 22.8787 25.477 23.4019 25.151 23.8962C24.5696 24.7657 23.9806 25.4389 22.9974 25.8966C22.4925 26.1355 21.9399 26.2565 21.3813 26.2505Z" fill="#FF4081"/>
                      </svg>
                    </a>
                  </div>
        </div>
      `;

            fragment.appendChild(showroomDiv);

            // 리뷰가 하나일 경우 toggle_reviews 버튼 숨기기
            const reviewSection = showroomDiv.querySelector(".review_section");
            if (reviewSection) {
              const reviewBoxes = reviewSection.querySelectorAll(".review_box");
              if (reviewBoxes.length <= 1) {
                reviewSection.querySelector(".toggle_reviews").style.display = "none";
              }
            }
          });

          showroomResults.appendChild(fragment);

          hideLoadingSpinner(); // 스피너 중지

          if (results.length === 0 && searchQuery) {
            showroomResults.innerHTML = `
                <div class="no-results">
                  <div class="no-results-icon">😅</div>
                  <p class="no-results-text">
                    '<span class="no-results-highlight">${searchQuery}</span>'으로
                    <br>쇼룸을 찾지 못했어요. 
                  </p>
                  <p class="no-results-subtext">
                    다른 키워드로 검색해 보시거나<br>
                    <span style="color: var(--Gray-pink1, #8C898A);
                    font-size: 14px;
                    font-style: normal;
                    font-weight: 700;
                    line-height: 130%;
                    text-decoration-line: underline;">윗쪽 검색창 아래 '가까운 쇼룸찾기'</span><br>기능을 이용해보세요! 
                  </p>
                </div>`;
          }
        }

        function displayInitialResults(data) {
          showLoadingSpinner(); // 로딩 스피너 표시
          displayResults(data.slice(0, resultsPerPage));
          clearBtn.style.display = "none";
          currentIndex = resultsPerPage;
          if (data.length > currentIndex) {
            loadingIndicator.style.display = "block";
          }
          hideLoadingSpinner(); // 로딩 스피너 숨기기
        }

        function searchAndDisplayResults(query) {
          findNearbyStoresButton.classList.remove("active");
          showLoadingSpinner(); // 스피너 실행
          // const filteredData = showroomData.filter((showroom) => Object.values(showroom).some((value) => value.toLowerCase().includes(query)));
          const filteredData = showroomData.filter((showroom) =>
            Object.entries(showroom).some(
              ([key, value]) =>
                !key.startsWith("blog_") && // 'blog_'로 시작하는 키 제외
                key !== "소개" && // '소개' 키 제외
                value.toLowerCase().includes(query)
            )
          );
          displayResults(filteredData.slice(0, resultsPerPage), query);
          currentIndex = resultsPerPage;
          loadingIndicator.style.display = filteredData.length > currentIndex ? "block" : "none";
          hideLoadingSpinner(); // 스피너 중지
        }

        function searchAndTagDisplayResults(query) {
          //            findNearbyStoresButton.classList.remove("active");    //가까운 쇼룸 찾기 삭제
          showLoadingSpinner(); // 스피너 실행
          var filteredData = showroomData.filter(
            (showroom) =>
              (selectedSido === null || showroom.시도 === selectedSido) &&
              (selectedGwonyeok === null || showroom.권역 === selectedGwonyeok) &&
              Object.values(showroom).some((value) => value.toLowerCase().includes(query))
          );

          //가까운 쇼룸 찾기 선택 시 추가 필터링
          if (findNearbyStoresButton.classList.contains("active")) {
            const userLatitude = cachedPosition.coords.latitude;
            const userLongitude = cachedPosition.coords.longitude;
            filteredData = filteredData
              .map((store) => {
                const distance = getDistance(userLatitude, userLongitude, store.위도, store.경도);
                return { ...store, distance: parseFloat(distance.toFixed(2)) }; // 소숫점 2자리로 반올림
              })
              .sort((a, b) => a.distance - b.distance);
          }

          displayResults(filteredData.slice(0, resultsPerPage), query);
          currentIndex = resultsPerPage;
          loadingIndicator.style.display = filteredData.length > currentIndex ? "block" : "none";
          hideLoadingSpinner(); // 스피너 중지
        }

        // showMoreNearbyStores 함수 수정
        function showMoreNearbyStores(position) {
          const userLatitude = position.coords.latitude;
          const userLongitude = position.coords.longitude;

          var additionalStores;
          if (selectedTag != "") {
            // 필터 선택 되어있을 경우
            additionalStores = showroomData.filter((showroom) =>
              Object.values(showroom).some((value) => value.toLowerCase().includes(selectedTag))
            );
            additionalStores = additionalStores
              .map((store) => {
                const distance = getDistance(userLatitude, userLongitude, store.위도, store.경도);
                return { ...store, distance: parseFloat(distance.toFixed(2)) }; // 소숫점 2자리로 반올림
              })
              .sort((a, b) => a.distance - b.distance)
              .slice(currentIndex, currentIndex + resultsPerPage); // 기존 인덱스부터 추가로 가져올 데이터
          } else {
            // `additionalStores` 초기화 필요
            additionalStores = showroomData
              .map((store) => {
                const distance = getDistance(userLatitude, userLongitude, store.위도, store.경도);
                return { ...store, distance: parseFloat(distance.toFixed(2)) }; // 소숫점 2자리로 반올림
              })
              .sort((a, b) => a.distance - b.distance)
              .slice(currentIndex, currentIndex + resultsPerPage); // 기존 인덱스부터 추가로 가져올 데이터
          }

          if (additionalStores.length > 0) {
            currentIndex += resultsPerPage;
            displayAdditionalResults(additionalStores); // 추가로 가져온 데이터 표시
          } else {
            // 더 이상 가져올 데이터가 없는 경우
            loadingIndicator.style.display = "none";
          }

          isFetching = false;
          hideLoadingSpinner(); // 로딩 스피너 숨기기
        }

        let selectedTag = ""; // 선택된 태그를 저장하는 변수
        // 해시태그로 찾기
        const hashtags = document.querySelectorAll(".hashtags span");

        hashtags.forEach((hashtag) => {
          hashtag.addEventListener("click", function () {
            // 가까운 쇼륨찾기 초기화
            //                findNearbyStoresButton.classList.remove("active");    //가까운 쇼룸찾기 초기화 삭제
            // 드롭다운 초기화 함수 호출
            //                resetDropdowns(); //드랍다운 초기화 함수 삭제

            // 모든 태그의 배경색을 초기화
            hashtags.forEach((tag) => {
              tag.style.backgroundColor = "#fff";
              tag.style.color = "#555";
              tag.style.border = "1px solid #ddd";
            });

            let query = this.textContent.toLowerCase().replace("#", "");
            if (query == selectedTag) {
              //선택한 태그 재선택 시 태그 필터링 초기화
              selectedTag = "";
              query = "";
            } else {
              // 클릭된 태그의 스타일을 변경
              this.style.backgroundColor = "#f15b77";
              this.style.color = "#fff";
              this.style.border = "none";

              // 기존 검색 및 결과 표시 로직 호출

              //                searchInput.value = query;    //검색창 삽입 삭제
              searchInput.value = "";
              selectedTag = query;
              clearBtn.style.display = "none";
            }
            //              searchAndDisplayResults(query);   //태그 검색 전용으로 변경
            searchAndTagDisplayResults(query); //태그 검색 전용으로 사용
          });
        });

        // 기존의 스크롤 이벤트 핸들러 수정
        window.addEventListener("scroll", () => {
          if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 50 && !isFetching) {
            isFetching = true;
            showLoadingSpinner(); // 로딩 스피너 표시

            if (findNearbyStoresButton.classList.contains("active")) {
              if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                  showMoreNearbyStores,
                  showError,
                  { timeout: 3000 } // 3초 후에 타임아웃 설정
                );
              } else {
                alert("이 브라우저는 위치 정보를 지원하지 않습니다.");
                isFetching = false;
                hideLoadingSpinner(); // 로딩 스피너 숨기기
              }
            } else {
              const query = searchInput.value.toLowerCase();
              /*
                                  const data =
                                      query.length > 0
                                          ? showroomData.filter((showroom) => Object.values(showroom).some((value) => value.toLowerCase().includes(query)))
                                          : selectedSido || selectedGwonyeok
                                              ? showroomData.filter(
                                                  (showroom) =>
                                                      (selectedSido === null || showroom.시도 === selectedSido) &&
                                                      (selectedGwonyeok === null || showroom.권역 === selectedGwonyeok)
                                              )
                                              : showroomData;
              */ //태그 and 조건으로 검색되도록 수정
              let data = null;
              if (query.length > 0) {
                data = showroomData.filter((showroom) => Object.values(showroom).some((value) => value.toLowerCase().includes(query)));
              } else {
                if (selectedSido || selectedGwonyeok || selectedTag) {
                  data = showroomData.filter(
                    (showroom) =>
                      (selectedSido === null || showroom.시도 === selectedSido) &&
                      (selectedGwonyeok === null || showroom.권역 === selectedGwonyeok) &&
                      Object.values(showroom).some((value) => value.toLowerCase().includes(selectedTag))
                  );
                } else {
                  data = showroomData;
                }
              }

              if (currentIndex < data.length) {
                loadingIndicator.style.display = "none";
                setTimeout(() => {
                  displayAdditionalResults(
                    data.slice(currentIndex, currentIndex + resultsPerPage),
                    query // 또는 searchQuery를 여기에 전달
                  );
                  currentIndex += resultsPerPage;
                  isFetching = false;
                  if (currentIndex < data.length) {
                    loadingIndicator.style.display = "block";
                  }
                  hideLoadingSpinner(); // 로딩 스피너 숨기기
                }, 1000);
              } else {
                isFetching = false;
                hideLoadingSpinner(); // 로딩 스피너 숨기기
              }
            }
          }
        });

        function displayAdditionalResults(results, searchQuery = "") {
          const fragment = document.createDocumentFragment();
          results.forEach((result) => {
            const showroomDiv = document.createElement("div");
            showroomDiv.classList.add("showroom");

            // 검색어 하이라이트 기능 추가
            const highlightedName = highlightText(result.쇼룸명, searchQuery);
            const highlightedIntro = highlightText(result.소개, searchQuery);
            const highlightedAddress = highlightText(result.주소, searchQuery);

            showroomDiv.innerHTML = `
        <div class="image-container">
          <img src="${result.사진}" alt="${result.쇼룸명}" />
          <div class="img_hashtags">
            <span>#${result.타입1}</span>
            ${result.타입2 ? `<span>#${result.타입2}</span>` : ""}
            <span>#${result.권역}</span>
          </div>
          <a href="${result.사진포스트링크}" target="_blank">
            <div class="photographer">
              @ ${result.사진작가}
            </div>
          </a>
          <div class="distance_section" ${result.distance ? 'style="display: flex;"' : 'style="display: none;"'}>
            <svg class="distance" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none">
              <path d="M6.99972 1.16699C4.42664 1.16699 2.33306 3.26058 2.33306 5.83074C2.31614 9.59033 6.82239 12.7077 6.99972 12.8337C6.99972 12.8337 11.6833 9.59033 11.6664 5.83366C11.6664 3.26058 9.5728 1.16699 6.99972 1.16699ZM6.99972 8.16699C5.71056 8.16699 4.66639 7.12283 4.66639 5.83366C4.66639 4.54449 5.71056 3.50033 6.99972 3.50033C8.28889 3.50033 9.33306 4.54449 9.33306 5.83366C9.33306 7.12283 8.28889 8.16699 6.99972 8.16699Z" fill="white"/>
            </svg>
            <div class="distance">  ${result.distance} km</div>
          </div>
          </div>
        </div>
        <div class="showroom_info">
          <div style="display: flex; flex-direction: column; width:100%;">
          <h3>${highlightedName}</h3>
          <p style="color:#333">${highlightedAddress}</p>
          

          
          <p>${highlightedIntro}</p>
        
          <div class="icons">
          <div style="display:flex; gap:10px;">
            ${
              result.동영상
                ? `
            <a href="${result.동영상}" target="_blank" id="icon_youtube">
            <div class="icon" >
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g id="jt-youtube">
                  <g id="Group">
                    <path id="Exclude" fill-rule="evenodd" clip-rule="evenodd" d="M20.5978 4.71569C21.5447 4.96794 22.2898 5.71693 22.5421 6.67159C23 8.39853 22.9961 11.9999 22.9961 11.9999C22.9961 11.9999 22.9961 15.6012 22.5382 17.3281C22.2859 18.2789 21.5408 19.0279 20.5939 19.284C18.8786 19.7459 11.9981 19.7459 11.9981 19.7459C11.9981 19.7459 5.11748 19.7459 3.40219 19.284C2.45528 19.0318 1.71018 18.2828 1.45793 17.3281C1 15.6012 1 11.9999 1 11.9999C1 11.9999 1 8.39853 1.46181 6.66771C1.71406 5.71693 2.45916 4.96794 3.40607 4.71181C5.12136 4.25 12.0019 4.25 12.0019 4.25C12.0019 4.25 18.8786 4.25 20.5978 4.71569ZM9.7511 8.72842V15.2714L15.5024 11.9999L9.7511 8.72842Z" fill="#333333"/>
                  </g>
                </g>
              </svg>
            </div>
            </a>
            `
                : ""
            }

            ${
              result.인스타그램
                ? `
            <a href="${result.인스타그램}" target="_blank" id="icon_instagram">
            <div class="icon" >
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M11.9987 8.83398C10.287 8.83398 8.83203 10.2889 8.83203 12.0007C8.83203 13.7124 10.287 15.1673 11.9987 15.1673C13.7104 15.1673 15.1654 13.7124 15.1654 12.0007C15.1654 10.2889 13.7104 8.83398 11.9987 8.83398Z" fill="#333333"/>
              <path d="M16.0591 2.5H8.02727C4.91818 2.5 2.5 4.91818 2.5 7.94091V15.9727C2.5 19.0818 4.91818 21.5 8.02727 21.5H16.0591C19.0818 21.5 21.5 19.0818 21.5 15.9727V7.94091C21.5 4.91818 19.0818 2.5 16.0591 2.5ZM12 17.0091C9.23636 17.0091 7.07727 14.7636 7.07727 12.0864C7.07727 9.40909 9.23636 7.07727 12 7.07727C14.7636 7.07727 16.9227 9.32273 16.9227 12C16.9227 14.6773 14.7636 17.0091 12 17.0091ZM17.0955 8.11364C16.4909 8.11364 15.9727 7.59545 15.9727 6.99091C15.9727 6.38636 16.4909 5.86818 17.0955 5.86818C17.7 5.86818 18.2182 6.38636 18.2182 6.99091C18.2182 7.59545 17.7 8.11364 17.0955 8.11364Z" fill="#333333"/>
              </svg>
            </div>
            </a>
            `
                : ""
            }

          </div>
          
                </div>
                
                `;

            if (result.blog_1_title || result.blog_2_title || result.blog_3_title) {
              showroomDiv.innerHTML += `
          <div class="review_section">
            <div class="review_title">
              <h3>방문 후기</h3>
              <button class="toggle_reviews">
                펼쳐보기 
                <svg xmlns="http://www.w3.org/2000/svg" width="11" height="5" viewBox="0 0 11 5" fill="none">
                  <path d="M1 1L5.5 4L10 1" stroke="#A9A9A9"/>
                </svg>
              </button>
            </div>
            <div class="reviews">
              ${
                result.blog_1_title
                  ? `
              <div class="review_box">
                <div class="quote_icon">
                  <span class="quote_icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <path d="M7.8207 6.18958L8.42322 6.08057V4.17188H7.67381C5.58747 4.17188 3.99723 4.69391 2.94582 5.72375C1.53094 7.11042 1.67333 8.89115 1.67782 8.91146V14.3281C1.67782 14.5077 1.75678 14.6799 1.89732 14.8069C2.03786 14.9339 2.22847 15.0052 2.42723 15.0052H7.67306C8.49966 15.0052 9.17188 14.3979 9.17188 13.651V8.91146C9.17188 8.73188 9.09292 8.55967 8.95238 8.43269C8.81184 8.30571 8.62122 8.23438 8.42247 8.23438H5.36565C5.38213 7.96219 5.45782 7.61687 5.68714 7.28917C6.06859 6.74682 6.78577 6.37714 7.8207 6.18958Z" fill="#666666"/>
                    <path d="M16.9769 6.18958L17.5795 6.08057V4.17188H16.8301C14.7437 4.17188 13.1535 4.69391 12.1021 5.72375C10.6872 7.11042 10.8296 8.89115 10.8341 8.91146V14.3281C10.8341 14.5077 10.913 14.6799 11.0536 14.8069C11.1941 14.9339 11.3847 15.0052 11.5835 15.0052H16.8293C17.6559 15.0052 18.3281 14.3979 18.3281 13.651V8.91146C18.3281 8.73188 18.2492 8.55967 18.1086 8.43269C17.9681 8.30571 17.7775 8.23438 17.5787 8.23438H14.5219C14.5384 7.96219 14.6141 7.61687 14.8434 7.28917C15.2248 6.74682 15.942 6.37714 16.9769 6.18958Z" fill="#666666"/>
                    </svg>
                  </span> 
                  <a href="${result.blog_1_link}" target="_blank">${result.blog_1_title}</a>
                </div>
                <p class="blogger_name">_by ${result.blog_1_name}</p>
              </div>
              `
                  : ""
              }
              ${
                result.blog_2_title
                  ? `
              <div class="review_box" style="display: none;">
                <div class="quote_icon">
                  <span class="quote_icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                      <path d="M7.8207 6.18958L8.42322 6.08057V4.17188H7.67381C5.58747 4.17188 3.99723 4.69391 2.94582 5.72375C1.53094 7.11042 1.67333 8.89115 1.67782 8.91146V14.3281C1.67782 14.5077 1.75678 14.6799 1.89732 14.8069C2.03786 14.9339 2.22847 15.0052 2.42723 15.0052H7.67306C8.49966 15.0052 9.17188 14.3979 9.17188 13.651V8.91146C9.17188 8.73188 9.09292 8.55967 8.95238 8.43269C8.81184 8.30571 8.62122 8.23438 8.42247 8.23438H5.36565C5.38213 7.96219 5.45782 7.61687 5.68714 7.28917C6.06859 6.74682 6.78577 6.37714 7.8207 6.18958Z" fill="#666666"/>
                      <path d="M16.9769 6.18958L17.5795 6.08057V4.17188H16.8301C14.7437 4.17188 13.1535 4.69391 12.1021 5.72375C10.6872 7.11042 10.8296 8.89115 10.8341 8.91146V14.3281C10.8341 14.5077 10.913 14.6799 11.0536 14.8069C11.1941 14.9339 11.3847 15.0052 11.5835 15.0052H16.8293C17.6559 15.0052 18.3281 14.3979 18.3281 13.651V8.91146C18.3281 8.73188 18.2492 8.55967 18.1086 8.43269C17.9681 8.30571 17.7775 8.23438 17.5787 8.23438H14.5219C14.5384 7.96219 14.6141 7.61687 14.8434 7.28917C15.2248 6.74682 15.942 6.37714 16.9769 6.18958Z" fill="#666666"/>
                    </svg>
                  </span> 
                  <a href="${result.blog_2_link}" target="_blank">${result.blog_2_title}</a>
                </div>
                <p class="blogger_name">_by ${result.blog_2_name}</p>
              </div>
              `
                  : ""
              }
              ${
                result.blog_3_title
                  ? `
              <div class="review_box" style="display: none;">
                <div class="quote_icon">
                  <span class="quote_icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                      <path d="M7.8207 6.18958L8.42322 6.08057V4.17188H7.67381C5.58747 4.17188 3.99723 4.69391 2.94582 5.72375C1.53094 7.11042 1.67333 8.89115 1.67782 8.91146V14.3281C1.67782 14.5077 1.75678 14.6799 1.89732 14.8069C2.03786 14.9339 2.22847 15.0052 2.42723 15.0052H7.67306C8.49966 15.0052 9.17188 14.3979 9.17188 13.651V8.91146C9.17188 8.73188 9.09292 8.55967 8.95238 8.43269C8.81184 8.30571 8.62122 8.23438 8.42247 8.23438H5.36565C5.38213 7.96219 5.45782 7.61687 5.68714 7.28917C6.06859 6.74682 6.78577 6.37714 7.8207 6.18958Z" fill="#666666"/>
                      <path d="M16.9769 6.18958L17.5795 6.08057V4.17188H16.8301C14.7437 4.17188 13.1535 4.69391 12.1021 5.72375C10.6872 7.11042 10.8296 8.89115 10.8341 8.91146V14.3281C10.8341 14.5077 10.913 14.6799 11.0536 14.8069C11.1941 14.9339 11.3847 15.0052 11.5835 15.0052H16.8293C17.6559 15.0052 18.3281 14.3979 18.3281 13.651V8.91146C18.3281 8.73188 18.2492 8.55967 18.1086 8.43269C17.9681 8.30571 17.7775 8.23438 17.5787 8.23438H14.5219C14.5384 7.96219 14.6141 7.61687 14.8434 7.28917C15.2248 6.74682 15.942 6.37714 16.9769 6.18958Z" fill="#666666"/>
                    </svg>
                  </span> 
                  <a href="${result.blog_3_link}" target="_blank">${result.blog_3_title}</a>
                </div>
                <p class="blogger_name">_by ${result.blog_3_name}</p>
              </div>
              `
                  : ""
              }
            </div>
          </div>
        `;
            }

            showroomDiv.innerHTML += `
              <div class="showroom_buttons">
                  <button onclick="window.open('${result.네이버지도}', '_blank')" class="info_button">
                    <img src="https://cdn.imweb.me/upload/S20240507ae9d7abf11ed7/605cc0e936c44.png" alt="Naver Map" class="button_icon">자세히보기
                  </button>
                  ${result.예약_필요 ? `<div class="reservation_required">방문 전 예약 필수</div>` : ""}
                  <div class="icon_telephone_mo">
                    <a href="tel:${result.연락처}" class="telephone">
                      <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28" fill="none">
                        <path d="M21.3813 26.2505C20.3138 26.2505 18.8143 25.8644 16.5688 24.6098C13.8383 23.0786 11.7263 21.6649 9.01049 18.9562C6.39205 16.3395 5.11783 14.6452 3.33447 11.4001C1.31979 7.73602 1.66322 5.81539 2.04713 4.99453C2.50432 4.01344 3.17916 3.42664 4.05143 2.84422C4.54687 2.51961 5.07117 2.24135 5.61768 2.01297C5.67236 1.98945 5.72322 1.96703 5.76861 1.9468C6.03932 1.82484 6.44947 1.64055 6.969 1.83742C7.31572 1.96758 7.62526 2.23391 8.10979 2.71242C9.10346 3.69242 10.4613 5.875 10.9623 6.94688C11.2986 7.6693 11.5212 8.14617 11.5217 8.68102C11.5217 9.30719 11.2067 9.79008 10.8245 10.3112C10.7528 10.4091 10.6817 10.5027 10.6128 10.5934C10.1967 11.1403 10.1053 11.2984 10.1655 11.5805C10.2874 12.1477 11.1969 13.8359 12.6915 15.3272C14.1861 16.8185 15.8256 17.6705 16.3949 17.792C16.6892 17.8548 16.8505 17.7597 17.4149 17.3287C17.4958 17.267 17.5789 17.203 17.6659 17.139C18.2488 16.7053 18.7093 16.3985 19.3207 16.3985H19.324C19.8561 16.3985 20.3117 16.6293 21.0663 17.0099C22.0507 17.5065 24.2989 18.8469 25.2849 19.8416C25.7646 20.3251 26.032 20.6335 26.1627 20.9797C26.3596 21.5009 26.1742 21.9094 26.0533 22.1828C26.0331 22.2282 26.0106 22.278 25.9871 22.3332C25.7569 22.8787 25.477 23.4019 25.151 23.8962C24.5696 24.7657 23.9806 25.4389 22.9974 25.8966C22.4925 26.1355 21.9399 26.2565 21.3813 26.2505Z" fill="#FF4081"/>
                      </svg>
                    </a>
                  </div>
        </div>
      `;

            fragment.appendChild(showroomDiv);

            // 리뷰가 하나일 경우 toggle_reviews 버튼 숨기기
            const reviewSection = showroomDiv.querySelector(".review_section");
            if (reviewSection) {
              const reviewBoxes = reviewSection.querySelectorAll(".review_box");
              if (reviewBoxes.length <= 1) {
                reviewSection.querySelector(".toggle_reviews").style.display = "none";
              }
            }
          });

          showroomResults.appendChild(fragment);

          hideLoadingSpinner(); // 스피너 중지

          if (results.length === 0 && searchQuery) {
            showroomResults.innerHTML = `
                <div class="no-results">
                  <div class="no-results-icon">😅</div>
                  <p class="no-results-text">
                    '<span class="no-results-highlight">${searchQuery}</span>'으로
                    <br>쇼룸을 찾지 못했어요. 
                  </p>
                  <p class="no-results-subtext">
                    다른 키워드로 검색해 보시거나<br>
                    <span style="color: var(--Gray-pink1, #8C898A);
                    font-size: 14px;
                    font-style: normal;
                    font-weight: 700;
                    line-height: 130%;
                    text-decoration-line: underline;">윗쪽 검색창 아래 '가까운 쇼룸찾기'</span><br>기능을 이용해보세요! 
                  </p>
                </div>`;
          }
        }

        displayInitialResults(showroomData);

        const sidoDropdown = document.getElementById("dropdown-sido-content");
        const gwonyeokDropdownContainer = document.getElementById("dropdown-gwonyeok");
        const gwonyeokDropdownContent = document.getElementById("dropdown-gwonyeok-content");
        const sidoButton = document.querySelector("#dropdown-sido .dropdown-button-1");
        const gwonyeokButton = document.querySelector("#dropdown-gwonyeok .dropdown-button-1");

        sidoDropdown.addEventListener("click", function (event) {
          if (event.target.tagName === "A") {
            const selectedSido = event.target.textContent;
            sidoButton.innerHTML = `${selectedSido} <span>&#9662;</span>`;
            filterGwonyeok(selectedSido);
            searchAndDisplayResultsBySido(selectedSido);
            sidoDropdown.style.display = "none"; // 숨김 처리

            // 시도가 변경되었을 때 권역 선택 메뉴명을 초기화
            gwonyeokButton.innerHTML = `권역 선택 <span>&#9662;</span>`;
          }
        });

        gwonyeokDropdownContent.addEventListener("click", function (event) {
          if (event.target.tagName === "A") {
            const selectedGwonyeok = event.target.textContent;
            gwonyeokButton.innerHTML = `${selectedGwonyeok} <span>&#9662;</span>`;
            searchAndDisplayResultsByGwonyeok(selectedGwonyeok);
            gwonyeokDropdownContent.style.display = "none";
          }
        });

        document.querySelectorAll(".dropdown-button-1").forEach((button) => {
          button.addEventListener("click", function () {
            const dropdownContent = this.nextElementSibling;
            const isVisible = dropdownContent.style.display === "block";
            document.querySelectorAll(".dropdown-content").forEach((content) => (content.style.display = "none"));
            if (!isVisible) {
              dropdownContent.style.display = "inline-block";
            }
          });
        });

        document.addEventListener("click", function (event) {
          if (!event.target.closest(".dropdown") && !event.target.closest(".dropdown-button-1")) {
            document.querySelectorAll(".dropdown-content").forEach((content) => (content.style.display = "none"));
          }
        });

        function filterGwonyeok(sido) {
          const gwonyeokList = showroomData
            .filter((showroom) => showroom.시도 === sido)
            .map((showroom) => showroom.권역)
            .filter((gwonyeok) => gwonyeok !== "");
          const uniqueGwonyeokList = [...new Set(gwonyeokList)];

          if (uniqueGwonyeokList.length > 0 && !(uniqueGwonyeokList.length == 1 && uniqueGwonyeokList[0] == sido)) {
            //권역이 1개이고 시도와 같은 경우 숨김처리
            gwonyeokDropdownContainer.style.display = "block";
            gwonyeokDropdownContent.innerHTML =
              '<a href="#">전체</a>' + uniqueGwonyeokList.map((gwonyeok) => `<a href="#">${gwonyeok}</a>`).join("");
            // 권역 드롭다운 콘텐츠가 업데이트된 후 이벤트 리스너 추가
            addGwonyeokEventListeners();
          } else {
            gwonyeokDropdownContainer.style.display = "none";
            gwonyeokDropdownContent.innerHTML = "";
          }
        }

        let selectedSido = null; // 선택된 시도를 저장하는 변수

        function searchAndDisplayResultsBySido(sido) {
          findNearbyStoresButton.classList.remove("active");
          selectedSido = sido === "전체" ? null : sido; // "전체" 선택 시 null로 설정
          showLoadingSpinner(); // 스피너 실행
          //            const filteredData = showroomData.filter((showroom) => selectedSido === null || showroom.시도 === selectedSido); //태그 and 조건으로 검색되도록 수정
          const filteredData = showroomData.filter(
            (showroom) =>
              (selectedSido === null || showroom.시도 === selectedSido) &&
              Object.values(showroom).some((value) => value.toLowerCase().includes(selectedTag))
          );

          displayFilteredResults(filteredData);
          hideLoadingSpinner(); // 스피너 중지
        }

        function displayFilteredResults(data) {
          currentIndex = 0;
          showroomResults.innerHTML = ""; // 기존 내용을 초기화
          if (data.length == 0) {
            showroomResults.innerHTML = `
                        <div class="no-results">
                        <div class="no-results-icon">😅</div>
                        <p class="no-results-text">
                            '<span class="no-results-highlight">${selectedTag}</span>'으로
                            <br>쇼룸을 찾지 못했어요. 
                        </p>
                        <p class="no-results-subtext">
                            다른 키워드로 검색해 보시거나<br>
                            <span style="color: var(--Gray-pink1, #8C898A);
                            font-size: 14px;
                            font-style: normal;
                            font-weight: 700;
                            line-height: 130%;
                            text-decoration-line: underline;">윗쪽 검색창 아래 '가까운 쇼룸찾기'</span><br>기능을 이용해보세요! 
                        </p>
                        </div>`;
          }
          displayAdditionalResults(data.slice(0, resultsPerPage));
          currentIndex += resultsPerPage;
          if (currentIndex < data.length) {
            loadingIndicator.style.display = "block";
          }
          hideLoadingSpinner(); // 로딩 스피너 숨기기

          window.addEventListener("scroll", () => {
            if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 50 && !isFetching) {
              isFetching = true;
              showLoadingSpinner(); // 로딩 스피너 표시

              const query = searchInput.value.toLowerCase();
              /*                    
                                  const filteredData = showroomData.filter(
                                      (showroom) =>
                                          (query.length === 0 || Object.values(showroom).some((value) => value.toLowerCase().includes(query))) &&
                                          (selectedSido === null || showroom.시도 === selectedSido) &&
                                          (selectedGwonyeok === null || showroom.권역 === selectedGwonyeok) 
                                  );
              */ //태그 and 조건으로 검색되도록 수정
              const filteredData = showroomData.filter(
                (showroom) =>
                  (query.length === 0 || Object.values(showroom).some((value) => value.toLowerCase().includes(query))) &&
                  (selectedSido === null || showroom.시도 === selectedSido) &&
                  (selectedGwonyeok === null || showroom.권역 === selectedGwonyeok) &&
                  Object.values(showroom).some((value) => value.toLowerCase().includes(selectedTag))
              );

              if (currentIndex < filteredData.length) {
                loadingIndicator.style.display = "none";
                setTimeout(() => {
                  displayAdditionalResults(
                    filteredData.slice(currentIndex, currentIndex + resultsPerPage),
                    query // 또는 searchQuery를 여기에 전달
                  );
                  currentIndex += resultsPerPage;
                  isFetching = false;
                  if (currentIndex < filteredData.length) {
                    loadingIndicator.style.display = "block";
                  }
                  hideLoadingSpinner(); // 로딩 스피너 숨기기
                }, 1000);
              } else {
                isFetching = false;
                hideLoadingSpinner(); // 로딩 스피너 숨기기
              }
            }
          });
        }

        let selectedGwonyeok = null; // 선택된 권역을 저장하는 변수

        function searchAndDisplayResultsByGwonyeok(gwonyeok) {
          findNearbyStoresButton.classList.remove("active");
          selectedGwonyeok = gwonyeok === "전체" ? null : gwonyeok; // "전체" 선택 시 null로 설정
          showLoadingSpinner(); // 스피너 실행
          /*     
                      const filteredData = showroomData.filter(
                          (showroom) =>
                              (selectedSido === null || showroom.시도 === selectedSido) && (selectedGwonyeok === null || showroom.권역 === selectedGwonyeok)
                      );
          */ //태그 and 조건으로 검색되도록 수정
          const filteredData = showroomData.filter(
            (showroom) =>
              (selectedSido === null || showroom.시도 === selectedSido) &&
              (selectedGwonyeok === null || showroom.권역 === selectedGwonyeok) &&
              Object.values(showroom).some((value) => value.toLowerCase().includes(selectedTag))
          );

          displayFilteredResults(filteredData);
          hideLoadingSpinner(); // 스피너 중지
        }

        function showLoadingSpinner() {
          loadingSpinner.style.display = "block";
        }

        function hideLoadingSpinner() {
          loadingSpinner.style.display = "none";
        }
      });
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        function toggleIcons() {
          const iconContainers = document.querySelectorAll(".icons > div > a");

          iconContainers.forEach((link) => {
            if (!link.getAttribute("href").trim()) {
              link.style.display = "none";
            }
          });
        }
        toggleIcons();
      });
    </script>
    <!-- CTA -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        var ctaButton = document.getElementById("cta-button");

        setTimeout(function () {
          ctaButton.classList.add("show_cta");
        }, 1000); // 1000ms = 1초
      });
    </script>
  </body>
</html>
